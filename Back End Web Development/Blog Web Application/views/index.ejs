<%- include('partials/header.ejs') %>

	<main class="container">
		<!-- Other posts section -->
		<div class="row mb-2">
			<% posts.slice(1, 3).forEach((post, index)=> { %>
				<div class="col-md-6">
					<div
						class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
						<div class="col p-4 d-flex flex-column position-static">
							<strong class="d-inline-block mb-2 text-primary-emphasis">Category</strong>
							<h3 class="mb-0">
								<%= post.title %>
							</h3>
							<div class="mb-1 text-body-secondary">
								<%= post.date %>
							</div>
							<p class="card-text mb-auto">
								<%= (post.detail ? post.detail.substring(0, 100) : 'No content available' ) %>...
							</p>
							<a href="/blog?postId=<%= index + 1 %>"
								class="icon-link gap-1 icon-link-hover stretched-link">
								Continue reading
								<svg class="bi">
									<use xlink:href="#chevron-right"></use>
								</svg>
							</a>
						</div>
						<div class="col-auto d-none d-lg-block">
							<svg class="bd-placeholder-img" width="200" height="250" xmlns="http://www.w3.org/2000/svg"
								role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice"
								focusable="false">
								<title>Placeholder</title>
								<rect width="100%" height="100%" fill="#55595c"></rect>
								<text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
							</svg>
						</div>
					</div>
				</div>
				<% }); %>
		</div>

		<!-- Main posts section -->
		<div class="row g-5">
			<div class="col-md-8">
				<h3 class="pb-4 mb-4 fst-italic border-bottom">
					From the Firehose
				</h3>
				<% posts.forEach((post, index)=> { %>
					<article class="blog-post">
						<h2 class="display-5 link-body-emphasis mb-1">
							<%= post.title %>
						</h2>
						<p class="blog-post-meta">
							<%= post.date %> by <%= post.author %>
						</p>
						<p>
							<%= (post.detail ? post.detail.substring(0, 200) : 'No content available' ) %>...
						</p>
						<a href="/blog?postId=<%= index %>" class="btn btn-primary">Read more</a>
						<hr>
					</article>
					<% }); %>
			</div>

			<!-- Sidebar section -->
			<div class="col-md-4">
				<div class="position-sticky" style="top: 2rem;">
					<div class="p-4 mb-3 bg-body-tertiary rounded">
						<h4 class="fst-italic">About</h4>
						<p class="mb-0">Customize this section to tell your visitors a little bit about your
							publication, writers, content, or something else entirely. Totally up to you.</p>
					</div>
					<div>
						<h4 class="fst-italic">Recent posts</h4>
						<ul class="list-unstyled">
							<% posts.slice(0, 5).forEach((post, index)=> { %>
								<li>
									<a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
										href="/blog?postId=<%= index %>">
										<svg class="bd-placeholder-img" width="100%" height="96"
											xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
											preserveAspectRatio="xMidYMid slice" focusable="false">
											<rect width="100%" height="100%" fill="#777"></rect>
										</svg>
										<div class="col-lg-8">
											<h6 class="mb-0">
												<%= post.title %>
											</h6>
											<small class="text-body-secondary">
												<%= post.date %>
											</small>
										</div>
									</a>
								</li>
								<% }); %>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</main>

	<%- include('partials/footer.ejs') %>